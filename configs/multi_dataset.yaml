experiment_name: multi-dataset-finetune

models:
  - name: mistral-medical-qa
    model_id: mistralai/Mistral-7B-v0.1
    task: finetune
    dataset:
      train_path: data/train/medical_qa_train.jsonl
      eval_path: data/eval/medical_ragas_eval.jsonl
    training_params:
      epochs: 5
      batch_size: 2
      learning_rate: 1.0e-5
      warmup_steps: 200
      max_seq_length: 768
      gradient_accumulation_steps: 8
      fp16: true
      lora:
        r: 32
        lora_alpha: 64
        lora_dropout: 0.05
        target_modules:
          - q_proj
          - v_proj
          - k_proj
          - o_proj
    ragas_metrics:
      faithfulness: true
      answer_relevancy: true
      context_precision: true
      context_recall: true
    register_model: true

  - name: mistral-legal-qa
    model_id: mistralai/Mistral-7B-v0.1
    task: finetune
    dataset:
      train_path: data/train/legal_qa_train.jsonl
      eval_path: data/eval/legal_ragas_eval.jsonl
    training_params:
      epochs: 3
      batch_size: 4
      learning_rate: 2.0e-5
      warmup_steps: 100
      max_seq_length: 1024
      gradient_accumulation_steps: 4
      fp16: true
      lora:
        r: 16
        lora_alpha: 32
        lora_dropout: 0.05
        target_modules:
          - q_proj
          - v_proj
    ragas_metrics:
      faithfulness: true
      answer_relevancy: true
      context_precision: true
      context_recall: true
    register_model: true
