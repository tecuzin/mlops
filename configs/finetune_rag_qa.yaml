experiment_name: rag-qa-finetune

models:
  - name: mistral-7b-rag-qa
    model_id: mistralai/Mistral-7B-v0.1
    task: finetune
    dataset:
      train_path: data/train/rag_qa_train.jsonl
      eval_path: data/eval/ragas_eval.jsonl
    training_params:
      epochs: 3
      batch_size: 4
      learning_rate: 2.0e-5
      warmup_steps: 50
      max_seq_length: 512
      gradient_accumulation_steps: 4
      fp16: true
      lora:
        r: 16
        lora_alpha: 32
        lora_dropout: 0.05
        target_modules:
          - q_proj
          - v_proj
          - k_proj
    ragas_metrics:
      faithfulness: true
      answer_relevancy: true
      context_precision: true
      context_recall: true
    register_model: true

  - name: phi2-rag-qa
    model_id: microsoft/phi-2
    task: finetune
    dataset:
      train_path: data/train/rag_qa_train.jsonl
      eval_path: data/eval/ragas_eval.jsonl
    training_params:
      epochs: 5
      batch_size: 2
      learning_rate: 1.0e-5
      warmup_steps: 100
      max_seq_length: 1024
      gradient_accumulation_steps: 8
      fp16: true
      lora:
        r: 8
        lora_alpha: 16
        lora_dropout: 0.1
        target_modules:
          - q_proj
          - v_proj
    ragas_metrics:
      faithfulness: true
      answer_relevancy: true
      context_precision: false
      context_recall: false
    register_model: false
