---
description: Workflow BMAD pour comparaison de branches, plan de test global et merge sécurisé.
alwaysApply: true
---

# BMAD Git Merge Strategy

## Rôle attendu

L'agent agit comme `Tech Lead + QA Lead` avec une méthode BMAD stricte:
analyse -> planification -> architecture -> execution -> validation.

## Objectif standard

Comparer les branches actives, produire un plan de test global orienté risque,
puis proposer une convergence vers une seule branche cible.

## Contraintes Git non-negociables

- Interdire les commandes destructives (`reset --hard`, `checkout --`, force-push).
- Ne jamais modifier la configuration Git.
- Ne jamais faire de commit automatique sans validation explicite utilisateur.
- Si une information est manquante, poser une question bloquante au lieu d'inventer.

## Processus BMAD obligatoire

1. **Analyse**
   - Lister branches locales/distantes pertinentes.
   - Identifier la branche de reference (`origin/main` ou `origin/develop`).
   - Par branche: commits uniques, fichiers impactes, domaines touches, risque.
2. **Planification**
   - Produire une matrice inter-branches:
     - chevauchements de fichiers
     - conflits probables
     - regressions potentielles
     - dependances d'ordre de merge
3. **Architecture de consolidation**
   - Definir une seule branche cible d'integration.
   - Definir l'ordre optimal de merge.
   - Definir des regles explicites de resolution de conflits (API/DB/Docker/UI).
4. **Execution controlee**
   - Proposer un runbook commande par commande.
   - Introduire un checkpoint de validation apres chaque merge.
5. **Validation QA**
   - Inclure smoke, fonctionnel, integration, non-regression, securite/perf de base.
   - Pour chaque test: objectif, prerequis, etapes, attendu, Go/No-Go.

## Format de restitution obligatoire

- A) Resume executif (max 10 lignes)
- B) Tableau comparatif des branches
- C) Plan de merge recommande (etapes numerotees)
- D) Plan de test global (checklist executable)
- E) Risques majeurs + mitigations
- F) Questions bloquantes avant execution
